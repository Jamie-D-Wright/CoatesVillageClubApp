# Events API Documentation

## Overview
The Events API provides endpoints for managing and retrieving club events. This document mirrors the authoritative specification from the **"Coates Village Club" Copilot Space** (Jamie-D-Wright/Coates Village Club).

For complete backend specifications including .NET implementation details, authentication patterns, and database schemas, access the Copilot Space via GitHub MCP.

## Base URL
- **Development**: `http://localhost:7071/api`
- **Production**: `https://api.coatesvillageclub.co.uk/api`

## Authentication
Public event viewing does not require authentication. Future endpoints (create, update, delete events) will require JWT authentication with Committee role.

## Endpoints

### GET /v1/events
Retrieve a list of events.

#### Query Parameters
| Parameter | Type | Required | Default | Description |
|-----------|------|----------|---------|-------------|
| `status` | string | No | `upcoming` | Filter by event status: `upcoming`, `past`, `all` |
| `page` | number | No | `1` | Page number for pagination |
| `limit` | number | No | `10` | Number of events per page (max: 50) |

#### Success Response (200 OK)
```json
{
  "events": [
    {
      "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "title": "Quiz Night",
      "description": "Monthly quiz with prizes. Teams of up to 6 people.",
      "date": "2025-11-15",
      "startTime": "20:00",
      "endTime": "23:00",
      "eventType": "SpecialEvent",
      "createdAt": "2025-11-01T10:00:00Z",
      "updatedAt": "2025-11-01T10:00:00Z"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 3,
    "totalEvents": 25,
    "limit": 10
  }
}
```

#### Event Types
- `SpecialEvent` - Special events like quiz nights, live music, themed parties
- `RegularBarNight` - Regular Friday/Saturday 8pm-12am bar openings
- `PrivateHire` - Private bookings of the venue
- `Fundraiser` - Charity or fundraising events

#### Error Responses

**400 Bad Request**
```json
{
  "error": {
    "code": "INVALID_PARAMETERS",
    "message": "Invalid query parameters provided"
  }
}
```

**500 Internal Server Error**
```json
{
  "error": {
    "code": "INTERNAL_ERROR",
    "message": "An unexpected error occurred while fetching events"
  }
}
```

**503 Service Unavailable**
```json
{
  "error": {
    "code": "SERVICE_UNAVAILABLE",
    "message": "The service is temporarily unavailable. Please try again later."
  }
}
```

## Data Model

### Event Entity
```typescript
interface Event {
  id: string;              // UUID
  title: string;           // 1-200 characters
  description: string;     // 0-2000 characters
  date: string;           // ISO 8601 date (YYYY-MM-DD)
  startTime: string;      // HH:mm format (24-hour)
  endTime: string;        // HH:mm format (24-hour)
  eventType: EventType;   // Enum: SpecialEvent | RegularBarNight | PrivateHire | Fundraiser
  createdAt: string;      // ISO 8601 datetime
  updatedAt: string;      // ISO 8601 datetime
}
```

### Pagination Metadata
```typescript
interface Pagination {
  currentPage: number;    // Current page number (1-indexed)
  totalPages: number;     // Total number of pages
  totalEvents: number;    // Total count of events matching filter
  limit: number;         // Events per page
}
```

## Example Requests

### Get Upcoming Events
```bash
curl -X GET "https://api.coatesvillageclub.co.uk/api/v1/events?status=upcoming&limit=10"
```

### Get Past Events (Page 2)
```bash
curl -X GET "https://api.coatesvillageclub.co.uk/api/v1/events?status=past&page=2&limit=20"
```

### Get All Events
```bash
curl -X GET "https://api.coatesvillageclub.co.uk/api/v1/events?status=all"
```

## Rate Limiting
No rate limiting applied to public event viewing endpoint.

## Caching Strategy

### Mock API
- **Strategy**: Cache-first
- **Duration**: 5 minutes
- **Rationale**: Mock data doesn't change, optimize for offline capability

### Real API
- **Strategy**: Network-first with cache fallback
- **Duration**: 1 minute
- **Rationale**: Fresh data preferred, cache for offline resilience

## Backend Reference
For complete implementation details including:
- .NET 8 Azure Functions implementation
- Entity Framework Core models
- Database migrations
- Authentication middleware
- Validation rules
- Business logic

**Access the "Coates Village Club" Copilot Space** (Jamie-D-Wright/Coates Village Club) via GitHub MCP.

## Notes
- Event dates are validated to ensure `endTime` is after `startTime`
- Regular bar nights (Friday/Saturday 8pm-12am) are auto-generated by the backend
- Past events are retained in the database for historical records
- Future endpoints will support event CRUD operations (Committee members only)
